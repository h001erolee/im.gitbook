# sysManage

## sysManage <a href="#module_sysmanage" id="module_sysmanage"></a>

* [sysManage](sysManage.md#module\_sysmanage)
  * [.sendRosterMessage(msg)](sysManage.md#module\_sysmanage\_\_sendrostermessage) ⇒ `number`
  * [.sendGroupMessage(msg)](sysManage.md#module\_sysmanage\_\_sendgroupmessage) ⇒ `number`
  * [.requireHistoryMessage(uid, sid, amount)](sysManage.md#module\_sysmanage\_\_requirehistorymessage)
  * [.sendMentionMessage(params)](sysManage.md#module\_sysmanage\_\_sendmentionmessage) ⇒ `number`
  * [.sendInputStatusMessage(uid, status)](sysManage.md#module\_sysmanage\_\_sendinputstatusmessage) ⇒ `number`
  * [.forwardMessage(param)](sysManage.md#module\_sysmanage\_\_forwardmessage) ⇒ `number`
  * [.getMessageStatus(cid, mid, isGroup)](sysManage.md#module\_sysmanage\_\_getmessagestatus) ⇒ `string`
  * [.asyncFileUpload(param)](sysManage.md#module\_sysmanage\_\_asyncfileupload) ⇒ [`Promise.<FileUploadResult>`](types.md#module\_types\_\_fileuploadresult)
  * [.getImage(param)](sysManage.md#module\_sysmanage\_\_getimage) ⇒ `string`
  * [.deleteConversation(id, other\_devices)](sysManage.md#module\_sysmanage\_\_deleteconversation)
  * [.asyncGetGroupAvatarUploadUrl(params)](sysManage.md#module\_sysmanage\_\_asyncgetgroupavataruploadurl) ⇒ [`Promise.<FileUpload>`](types.md#module\_types\_\_fileupload)
  * [.asyncGetFileUploadChatFileUrl(params)](sysManage.md#module\_sysmanage\_\_asyncgetfileuploadchatfileurl) ⇒ [`Promise.<FileUpload>`](types.md#module\_types\_\_fileupload)

### sysManage.sendRosterMessage(msg) ⇒ `number` <a href="#module_sysmanage__sendrostermessage" id="module_sysmanage__sendrostermessage"></a>

SendSingle chat message

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `number` - Message ID generated by client

| Param          | Type                 | Description                                                                |
| -------------- | -------------------- | -------------------------------------------------------------------------- |
| msg            | `object`             | Message body                                                               |
| msg.uid        | `string`             | Receiver ID                                                                |
| msg.content    | `string`             | Message content                                                            |
| msg.type       | `string`             | Message types: text, image, audio, video, file, location, command, forward |
| msg.ext        | `string` \| `object` | Extension field                                                            |
| msg.attachment | `string` \| `object` | Attachment info                                                            |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.sendGroupMessage(msg) ⇒ `number` <a href="#module_sysmanage__sendgroupmessage" id="module_sysmanage__sendgroupmessage"></a>

SendGroup chat message

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `number` - Message ID generated by client

| Param          | Type                 | Description                                                                                                  |
| -------------- | -------------------- | ------------------------------------------------------------------------------------------------------------ |
| msg            | `object`             | Send message body                                                                                            |
| msg.gid        | `string`             | GroupID                                                                                                      |
| msg.content    | `string`             | Message content                                                                                              |
| msg.type       | `string`             | Message types: text, image, audio, video, file, location, command, forward                                   |
| msg.ext        | `string` \| `object` | Extension field                                                                                              |
| msg.attachment | `string` \| `object` | Attachment info                                                                                              |
| msg.priority   | `number`             | Set message diffusion priority, default 0. 0 means diffusion, and the smaller the number, the more diffused. |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.requireHistoryMessage(uid, sid, amount) <a href="#module_sysmanage__requirehistorymessage" id="module_sysmanage__requirehistorymessage"></a>

Request history

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)

| Param  | Type     | Description                                                                            |
| ------ | -------- | -------------------------------------------------------------------------------------- |
| uid    | `number` | SessionID                                                                              |
| sid    | `number` | Message ID: the message to pull forward from, 0 means pulling from the latest message. |
| amount | `number` | Number of messages to pull                                                             |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.sendMentionMessage(params) ⇒ `number` <a href="#module_sysmanage__sendmentionmessage" id="module_sysmanage__sendmentionmessage"></a>

Group-sent @message

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `number` - Message ID generated by client

| Param                   | Type             | Description                  |
| ----------------------- | ---------------- | ---------------------------- |
| params                  | `object`         |                              |
| params.gid              | `number`         | GroupID                      |
| params.txt              | `string`         | Message text content         |
| params.mentionAll       | `boolean`        | Whether to @ everyone        |
| params.mentionList      | `Array.<number>` | List of @member IDs          |
| params.mentionedMessage | `string`         | Display content of @messages |
| params.mentionedMessage | `string`         | Push content of @messages    |
| params.senderNickname   | `string`         | Sender's nickname            |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.sendInputStatusMessage(uid, status) ⇒ `number` <a href="#module_sysmanage__sendinputstatusmessage" id="module_sysmanage__sendinputstatusmessage"></a>

Send type status

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `number` - Message ID generated by client

| Param  | Type     | Description                                  |
| ------ | -------- | -------------------------------------------- |
| uid    | `number` | SessionID                                    |
| status | `string` | Status: nothing - no typing, typing - typing |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.forwardMessage(param) ⇒ `number` <a href="#module_sysmanage__forwardmessage" id="module_sysmanage__forwardmessage"></a>

Forward message

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `number` - Message ID generated by client

| Param     | Type     | Description                                                  |
| --------- | -------- | ------------------------------------------------------------ |
| param     | `object` | Parameter                                                    |
| param.uid | `number` | Receiver's user ID (set only when forwarding a shingle chat) |
| param.gid | `number` | Receiver's group ID (set only when forwarding a group chat)  |
| param.mid | `number` | Message to forwardID                                         |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.getMessageStatus(cid, mid, isGroup) ⇒ `string` <a href="#module_sysmanage__getmessagestatus" id="module_sysmanage__getmessagestatus"></a>

Get message status

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `string` - Message status: unread, delivered, read

| Param   | Type      | Default | Description                |
| ------- | --------- | ------- | -------------------------- |
| cid     | `number`  |         | SessionID                  |
| mid     | `number`  |         | MessageID                  |
| isGroup | `boolean` | `false` | Whether it is a group chat |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.asyncFileUpload(param) ⇒ [`Promise.<FileUploadResult>`](types.md#module\_types\_\_fileuploadresult) <a href="#module_sysmanage__asyncfileupload" id="module_sysmanage__asyncfileupload"></a>

Upload file

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: [`Promise.<FileUploadResult>`](types.md#module\_types\_\_fileuploadresult) - File uploading result

| Param                 | Type                                                                 | Description                                                                                                                                                                                                                                                                                               |
| --------------------- | -------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| param                 | `object`                                                             | Parameter                                                                                                                                                                                                                                                                                                 |
| param.group\_d        | `number`                                                             | GroupID                                                                                                                                                                                                                                                                                                   |
| param.toType          | `number`                                                             | Receiver types: rosterAvatar - user avatar, chat - chat file, groupAvatar - group avatar                                                                                                                                                                                                                  |
| param.to\_id          | `number`                                                             | Receiver ID                                                                                                                                                                                                                                                                                               |
| param.file            | `File`                                                               | File                                                                                                                                                                                                                                                                                                      |
| param.fileType        | `string`                                                             | File types: file - general chat file, audio - voice chat file (amr format), image - image chat file, video - video chat file, audio-mp3 - voice chat file (mp3 format), shareFile - general shared file, shareAudio - voice shared file, shareImage - image shared files, shareVideo - video shared files |
| param.chatType        | `number`                                                             | Chat types: roster - single chat, group - group chat                                                                                                                                                                                                                                                      |
| param.processCallback | [`fileUploadProgress`](types.md#module\_types\_\_fileuploadprogress) | Upload progressCallback                                                                                                                                                                                                                                                                                   |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.getImage(param) ⇒ `string` <a href="#module_sysmanage__getimage" id="module_sysmanage__getimage"></a>

Assemble image path

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: `string` - ImageAddress

| Param           | Type      | Description                         |
| --------------- | --------- | ----------------------------------- |
| param           | `object`  |                                     |
| param.avatar    | `string`  | FileAddress                         |
| param.type      | `string`  | Types: roster - user, group - group |
| param.thumbnail | `boolean` | Thumbnail or not: true by default   |
| param.sdefault  | `string`  | Default image address               |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.deleteConversation(id, other\_devices) <a href="#module_sysmanage__deleteconversation" id="module_sysmanage__deleteconversation"></a>

Delete session

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)

| Param          | Type      | Default | Description                                                       |
| -------------- | --------- | ------- | ----------------------------------------------------------------- |
| id             | `number`  |         | SessionID                                                         |
| other\_devices | `boolean` | `true`  | Whether to delete conversations on other devices at the same time |

**Example**

```js
<div data-gb-custom-block data-tag="lanying_code_snippet" data-0=',function=' data-repo='lanying-im-web' data-class='sysManage'></div>
```

### sysManage.asyncGetGroupAvatarUploadUrl(params) ⇒ [`Promise.<FileUpload>`](types.md#module\_types\_\_fileupload) <a href="#module_sysmanage__asyncgetgroupavataruploadurl" id="module_sysmanage__asyncgetgroupavataruploadurl"></a>

Get the URL of uploading group avatar

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: [`Promise.<FileUpload>`](types.md#module\_types\_\_fileupload) - File uploading info

| Param            | Type     | Description |
| ---------------- | -------- | ----------- |
| params           | `object` | Parameter   |
| params.group\_id | `number` | GroupID     |

### sysManage.asyncGetFileUploadChatFileUrl(params) ⇒ [`Promise.<FileUpload>`](types.md#module\_types\_\_fileupload) <a href="#module_sysmanage__asyncgetfileuploadchatfileurl" id="module_sysmanage__asyncgetfileuploadchatfileurl"></a>

Get upload address of chat file

**Kind**: static method of [`sysManage`](sysManage.md#module\_sysmanage)\
**Returns**: [`Promise.<FileUpload>`](types.md#module\_types\_\_fileupload) - File uploading info

| Param             | Type     | Description                                                                                                                                                                                                                                                    |
| ----------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| params            | `object` | Parameter                                                                                                                                                                                                                                                      |
| params.file\_type | `number` | File types: 100 - general chat file, 101 - voice chat file (amr format), 102 - image chat file, 103 - video chat file, 104 - voice chat file (mp3 format) 200 - general shared file, 201 - voice shared file, 202 - image shared file, 203 - video shared file |
| params.to\_type   | `number` | Conversation types: 1 - user, 2 - group                                                                                                                                                                                                                        |
| params.to\_id     | `number` | SessionID                                                                                                                                                                                                                                                      |
