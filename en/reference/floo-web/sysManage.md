# sysManage
## sysManage {#module_sysmanage}

* [sysManage](#module_sysmanage)
    * [.sendRosterMessage(msg)](#module_sysmanage__sendrostermessage) ⇒ <code>number</code>
    * [.sendGroupMessage(msg)](#module_sysmanage__sendgroupmessage) ⇒ <code>number</code>
    * [.requireHistoryMessage(uid, sid, amount)](#module_sysmanage__requirehistorymessage)
    * [.sendMentionMessage(params)](#module_sysmanage__sendmentionmessage) ⇒ <code>number</code>
    * [.sendInputStatusMessage(uid, status)](#module_sysmanage__sendinputstatusmessage) ⇒ <code>number</code>
    * [.forwardMessage(param)](#module_sysmanage__forwardmessage) ⇒ <code>number</code>
    * [.getMessageStatus(cid, mid, isGroup)](#module_sysmanage__getmessagestatus) ⇒ <code>string</code>
    * [.asyncFileUpload(param)](#module_sysmanage__asyncfileupload) ⇒ [<code>Promise.&lt;FileUploadResult&gt;</code>](types.md#module_types__fileuploadresult)
    * [.getImage(param)](#module_sysmanage__getimage) ⇒ <code>string</code>
    * [.deleteConversation(id, other_devices)](#module_sysmanage__deleteconversation)
    * [.asyncGetGroupAvatarUploadUrl(params)](#module_sysmanage__asyncgetgroupavataruploadurl) ⇒ [<code>Promise.&lt;FileUpload&gt;</code>](types.md#module_types__fileupload)
    * [.asyncGetFileUploadChatFileUrl(params)](#module_sysmanage__asyncgetfileuploadchatfileurl) ⇒ [<code>Promise.&lt;FileUpload&gt;</code>](types.md#module_types__fileupload)

### sysManage.sendRosterMessage(msg) ⇒ <code>number</code> {#module_sysmanage__sendrostermessage}
SendSingle chat message

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>number</code> - Message ID generated by client  

| Param | Type | Description |
| --- | --- | --- |
| msg | <code>object</code> | Message body |
| msg.uid | <code>string</code> | Receiver ID |
| msg.content | <code>string</code> | Message content |
| msg.type | <code>string</code> | Message types: text, image, audio, video, file, location, command, forward |
| msg.ext | <code>string</code> &#124; <code>object</code> | Extension field |
| msg.attachment | <code>string</code> &#124; <code>object</code> | Attachment info |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="sendRosterMessage" %}{% endlanying_code_snippet %}
```
### sysManage.sendGroupMessage(msg) ⇒ <code>number</code> {#module_sysmanage__sendgroupmessage}
SendGroup chat message

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>number</code> - Message ID generated by client  

| Param | Type | Description |
| --- | --- | --- |
| msg | <code>object</code> | Send message body |
| msg.gid | <code>string</code> | GroupID |
| msg.content | <code>string</code> | Message content |
| msg.type | <code>string</code> | Message types: text, image, audio, video, file, location, command, forward |
| msg.ext | <code>string</code> &#124; <code>object</code> | Extension field |
| msg.attachment | <code>string</code> &#124; <code>object</code> | Attachment info |
| msg.priority | <code>number</code> | Set message diffusion priority, default 0. 0 means diffusion, and the smaller the number, the more diffused. |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="sendGroupMessage" %}{% endlanying_code_snippet %}
```
### sysManage.requireHistoryMessage(uid, sid, amount) {#module_sysmanage__requirehistorymessage}
Request history

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  

| Param | Type | Description |
| --- | --- | --- |
| uid | <code>number</code> | SessionID |
| sid | <code>number</code> | Message ID: the message to pull forward from, 0 means pulling from the latest message. |
| amount | <code>number</code> | Number of messages to pull |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="requireHistoryMessage" %}{% endlanying_code_snippet %}
```
### sysManage.sendMentionMessage(params) ⇒ <code>number</code> {#module_sysmanage__sendmentionmessage}
Group-sent @message

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>number</code> - Message ID generated by client  

| Param | Type | Description |
| --- | --- | --- |
| params | <code>object</code> |  |
| params.gid | <code>number</code> | GroupID |
| params.txt | <code>string</code> | Message text content |
| params.mentionAll | <code>boolean</code> | Whether to @ everyone |
| params.mentionList | <code>Array.&lt;number&gt;</code> | List of @member IDs |
| params.mentionedMessage | <code>string</code> | Display content of @messages |
| params.mentionedMessage | <code>string</code> | Push content of @messages |
| params.senderNickname | <code>string</code> | Sender's nickname |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="sendMentionMessage" %}{% endlanying_code_snippet %}
```
### sysManage.sendInputStatusMessage(uid, status) ⇒ <code>number</code> {#module_sysmanage__sendinputstatusmessage}
Send type status

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>number</code> - Message ID generated by client  

| Param | Type | Description |
| --- | --- | --- |
| uid | <code>number</code> | SessionID |
| status | <code>string</code> | Status: nothing - no typing, typing - typing |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="sendInputStatusMessage" %}{% endlanying_code_snippet %}
```
### sysManage.forwardMessage(param) ⇒ <code>number</code> {#module_sysmanage__forwardmessage}
Forward message

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>number</code> - Message ID generated by client  

| Param | Type | Description |
| --- | --- | --- |
| param | <code>object</code> | Parameter |
| param.uid | <code>number</code> | Receiver's user ID (set only when forwarding a shingle chat) |
| param.gid | <code>number</code> | Receiver's group ID (set only when forwarding a group chat) |
| param.mid | <code>number</code> | Message to forwardID |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="forwardMessage" %}{% endlanying_code_snippet %}
```
### sysManage.getMessageStatus(cid, mid, isGroup) ⇒ <code>string</code> {#module_sysmanage__getmessagestatus}
Get message status

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>string</code> - Message status: unread, delivered, read  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| cid | <code>number</code> |  | SessionID |
| mid | <code>number</code> |  | MessageID |
| isGroup | <code>boolean</code> | <code>false</code> | Whether it is a group chat |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="getMessageStatus" %}{% endlanying_code_snippet %}
```
### sysManage.asyncFileUpload(param) ⇒ [<code>Promise.&lt;FileUploadResult&gt;</code>](types.md#module_types__fileuploadresult) {#module_sysmanage__asyncfileupload}
Upload file

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: [<code>Promise.&lt;FileUploadResult&gt;</code>](types.md#module_types__fileuploadresult) - File uploading result  

| Param | Type | Description |
| --- | --- | --- |
| param | <code>object</code> | Parameter |
| param.group_d | <code>number</code> | GroupID |
| param.toType | <code>number</code> | Receiver types: rosterAvatar - user avatar, chat - chat file, groupAvatar - group avatar |
| param.to_id | <code>number</code> | Receiver ID |
| param.file | <code>File</code> | File |
| param.fileType | <code>string</code> | File types: file - general chat file, audio - voice chat file (amr format), image - image chat file, video - video chat file, audio-mp3 - voice chat file (mp3 format), shareFile - general shared file, shareAudio - voice shared file, shareImage - image shared files, shareVideo - video shared files |
| param.chatType | <code>number</code> | Chat types: roster - single chat, group - group chat |
| param.processCallback | [<code>fileUploadProgress</code>](types.md#module_types__fileuploadprogress) | Upload progressCallback |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="asyncFileUpload" %}{% endlanying_code_snippet %}
```
### sysManage.getImage(param) ⇒ <code>string</code> {#module_sysmanage__getimage}
Assemble image path

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: <code>string</code> - ImageAddress  

| Param | Type | Description |
| --- | --- | --- |
| param | <code>object</code> |  |
| param.avatar | <code>string</code> | FileAddress |
| param.type | <code>string</code> | Types: roster - user, group - group |
| param.thumbnail | <code>boolean</code> | Thumbnail or not: true by default |
| param.sdefault | <code>string</code> | Default image address |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="getImage" %}{% endlanying_code_snippet %}
```
### sysManage.deleteConversation(id, other_devices) {#module_sysmanage__deleteconversation}
Delete session

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  

| Param | Type | Default | Description |
| --- | --- | --- | --- |
| id | <code>number</code> |  | SessionID |
| other_devices | <code>boolean</code> | <code>true</code> | Whether to delete conversations on other devices at the same time |

**Example**  
```js
{% lanying_code_snippet repo="lanying-im-web",class="sysManage",function="deleteConversation" %}{% endlanying_code_snippet %}
```
### sysManage.asyncGetGroupAvatarUploadUrl(params) ⇒ [<code>Promise.&lt;FileUpload&gt;</code>](types.md#module_types__fileupload) {#module_sysmanage__asyncgetgroupavataruploadurl}
Get the URL of uploading group avatar

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: [<code>Promise.&lt;FileUpload&gt;</code>](types.md#module_types__fileupload) - File uploading info  

| Param | Type | Description |
| --- | --- | --- |
| params | <code>object</code> | Parameter |
| params.group_id | <code>number</code> | GroupID |

### sysManage.asyncGetFileUploadChatFileUrl(params) ⇒ [<code>Promise.&lt;FileUpload&gt;</code>](types.md#module_types__fileupload) {#module_sysmanage__asyncgetfileuploadchatfileurl}
Get upload address of chat file

**Kind**: static method of [<code>sysManage</code>](#module_sysmanage)  
**Returns**: [<code>Promise.&lt;FileUpload&gt;</code>](types.md#module_types__fileupload) - File uploading info  

| Param | Type | Description |
| --- | --- | --- |
| params | <code>object</code> | Parameter |
| params.file_type | <code>number</code> | File types: 100 - general chat file, 101 - voice chat file (amr format), 102 - image chat file, 103 - video chat file, 104 - voice chat file (mp3 format) 200 - general shared file, 201 - voice shared file, 202 - image shared file, 203 - video shared file |
| params.to_type | <code>number</code> | Conversation types: 1 - user, 2 - group |
| params.to_id | <code>number</code> | SessionID |
